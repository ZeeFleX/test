# Общее описание

Для быстрого развертывания набор микросервисов сконфигурирован через docker compose. Сервисы следующие:

1. mariadb - реляционная БД. В ней сохраняется текущее состояние сущностей
2. business-service - node.js приложение, предоставляет простой REST API для получения всех сущностей и обновления одной сущности. После развёртывания сети Swagger-документация доступна по адресу [http://localhost:3005/api-explorer/](http://localhost:3005/api-explorer/ "http://localhost:3005/api-explorer/")
   Приложение имеет WS-сервер, к нему присоеднияются клиенты и получают обновления по сущностям
3. client1 - React + Mobx приложение. Отображает таблицу сущностей, получает обновления через WS. Доступен по адресу [http://localhost:3000](http://localhost:3000 "http://localhost:3000")
4. client2 - второй клиент доступен по адресу [http://localhost:3001](http://localhost:3001 "http://localhost:3001")
5. client3 - третий клиент доступен по адресу [http://localhost:3002](http://localhost:3002 "http://localhost:3002")
6. client4 - четвертый клиент доступен по адресу [http://localhost:3003](http://localhost:3003 "http://localhost:3003")
7. client5 - пятый клиент доступен по адресу [http://localhost:3004](http://localhost:3004 "http://localhost:3004")

#### Требования к окружению

В системе должны быть установлены **docker и docker-compose**
Тестирование проводилось под **Ubuntu 19.10**, но сборка должна работать и на других системах.

### Запуск и конфигурация

Специальной конфигурации не требуется, но основные параметры можно передать переменными окружения.

Для запуска сети склонируйте репозиторий и выполните из директории с проектом команду

```sh
docker-compose up -d
```

После сборки проверьте состояние контейнеров

```sh
docker-compose ps
```

Если все контейнеры подняты и функционируют можно открывать интерфейсы в браузере.

### Взаимодействие

**mock-service** генерирует случайные сущности и бомбит постом business-service. **Количество сущностей и их параметров произвольное** и передается переменными окружения в docker-compose.yml файле. По умолчанию 20 сущностей, у каждой 20 значений.

**business-service** принимает на REST эндпоинт обновлённую сущность, записывает её в базу данных, рассылает через веб-соккеты на клиенты.

**clients** Клиенты отрисовывают таблицу, считают общие значения для каждого из параметров (sum, min, max, avg).
